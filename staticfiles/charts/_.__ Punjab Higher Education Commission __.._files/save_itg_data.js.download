function publication_check_year(index)
{
	var publication_year = $( "select#publication_year_"+index+" option:selected").val();
	//alert('i am here');
	if(publication_year)
	{
		$('#search-box_'+index).prop("disabled", false); // Element(s) are now enabled.
		$('#search-box_'+index).val(""); 
		$('#published_international_'+index).val(""); 
	}
	else
	{
		$('#search-box_'+index).prop("disabled", true); // Element(s) are now enabled.
		$('#search-box_'+index).val(""); 
		$('#published_international_'+index).val(""); 
	}
}
function calculate_total_allowance()
{
	//alert('i am here');	
	var travel_cost_pkr = parseFloat($("#travel_cost_pkr").val());
	var register_cost_pkr = parseFloat($("#register_cost_pkr").val());
	var accomodation_cost_pkr = parseFloat($("#accomodation_cost_pkr").val());
	var daily_allowance_pkr = parseFloat($("#daily_allowance_pkr").val());
	
	var total_allowance_pkr = travel_cost_pkr + register_cost_pkr + accomodation_cost_pkr + daily_allowance_pkr;
	$("#total_allowance_pkr").val(total_allowance_pkr);
	
	var travel_cost_usd = parseFloat($("#travel_cost_usd").val());
	var register_cost_usd = parseFloat($("#register_cost_usd").val());
	var accomodation_cost_usd = parseFloat($("#accomodation_cost_usd").val());
	var daily_allowance_usd = parseFloat($("#daily_allowance_usd").val());
	
	var total_allowance_usd = travel_cost_usd + register_cost_usd + accomodation_cost_usd + daily_allowance_usd;
	$("#total_allowance_usd").val(total_allowance_usd);
}
function load_allowance()
{
	 var itg_rates_cities_id = $( "select#itg_rates_cities_id option:selected").val();
	 var category_id = $( "select#category_id option:selected").val();
	 
	 var event_days = parseInt($( "#event_days").val());
	 
	 var dollar_rate = parseFloat($("#dollar_rate").val()).toFixed(2);
	 
	 
	 
	 var post_url = window.location.protocol + "//" + window.location.host + "/";
	 if (itg_rates_cities_id && category_id)
	 {
		 // show the div
		$("#ajax_loading_cost").show();
		var tbl = 'itg_rates_categories';
		
		$.ajax({
			  type: "POST",
			  url: post_url+"load_allowance.php",
			  data: "tbl="+ tbl +"& itg_rates_cities_id="+ itg_rates_cities_id +"& category_id="+ category_id,
			  success: function(data){
				  $("#ajax_loading_cost").hide();
				  var rate = parseFloat(data);
				  
				  if (rate && event_days)
				  {
					 // alert(rate);
					 var cost_usd =  event_days * (rate/2);
					 cost_usd = cost_usd.toFixed(2);
					 var cost_pkr = cost_usd * dollar_rate;
					  
					  cost_pkr = cost_pkr.toFixed(2);
					  
					  $("#daily_allowance_pkr").val(cost_pkr);
					  $("#daily_allowance_usd").val(cost_usd);
				  }
				  
			  }
		  });
		 
	 }
	 else
	 {
		$("#ajax_loading_cost").hide();
	 }
}
function convert_usd(obj, id) 
{
	
	//alert($(obj).val());
	//alert(id);
	var cost_usd = parseFloat($(obj).val());
	var dollar_rate = parseFloat($("#dollar_rate").val()).toFixed(2);
	//alert(cost_usd);
	//alert(dollar_rate);
	if (cost_usd && cost_usd != '0.00')
	{
		var cost_pkr = cost_usd * dollar_rate;
		cost_pkr = cost_pkr.toFixed(2);
		$("#"+id).val(cost_pkr)	;	
	}
}
function remove_prev_paticip(index)

{

	var result = confirm("Are you sure you want to delete?");

	if (result) {

		$('#prev_particip_'+index).remove();

	}

}
function remove_prev_transport(index)

{

	var result = confirm("Are you sure you want to delete?");

	if (result) {

		$('#prev_transport_'+index).remove();

	}

}

function remove_local_pub(index)

{

	var result = confirm("Are you sure you want to delete?");

	if (result) {

		$('#localpub_'+index).remove();

	}

}

function remove_book_authored(index)

{

	var result = confirm("Are you sure you want to delete?");

	if (result) {

		$('#bookauthored_'+index).remove();

	}

}
function remove_conference_paper(index)

{

	var result = confirm("Are you sure you want to delete?");

	if (result) {

		$('#conferencepaper_'+index).remove();

	}

}

function remove_international_pub(index)

{

	var result = confirm("Are you sure you want to delete?");

	if (result) {

		$('#internationpub_'+index).remove();
		
		var counter = parseInt($("#counter").val());
		//alert(counter);
		if (counter)
		{
			var i;
			var current_impact_factor;
			var total_current_factor = 0.00;
			for (i = 1; i <= counter; i++) 
			{   
			   current_impact_factor = $("#international_impact_"+i).val(); 
			   //alert(current_impact_factor);
			   if (current_impact_factor)
			   {
				  current_impact_factor = parseFloat(current_impact_factor); 
				  total_current_factor = total_current_factor + current_impact_factor;
			   }
			}
			total_current_factor.toPrecision(3);
			$("#total_impact_factor_international").val(total_current_factor);
		}

	}

}

function paper_editor_vals()
{
	nicEditors.findEditor('info_organizers').saveContent();	
	nicEditors.findEditor('scope_conference').saveContent();	
	nicEditors.findEditor('explain_participation').saveContent();	
}
function accomodation_editor_vals()
{
	nicEditors.findEditor('accomodation').saveContent();	
}
function remarks_editor_vals()
{
	nicEditors.findEditor('remarks').saveContent();	
}
function selectLocIssn(id, index, name) 
{
	$("#local_issn_"+index).val(name);
	$("#issn_id_local_"+index).val(id);
	$("#box_local_"+index).hide();
	load_issn_local_jrnal(id, index);
}
function auto_complete_local(index, val)
{
   var keyword = $(val).val();
   var post_url = window.location.protocol + "//" + window.location.host + "/";
   //alert(keyword);
   //alert(index);
   $.ajax({
	  type: "POST",
	  url: post_url+"read_local_issn.php",
	  data:'keyword='+keyword+'&index='+index,
	  beforeSend: function(){
		  $("#local_issn_"+index).css("background","#FFF url(LoaderIcon.gif) no-repeat 165px");
	  },
	  success: function(data){
		  $("#box_local_"+index).show();
		  $("#box_local_"+index).html(data);
		  $("#local_issn_"+index).css("background","#FFF");
	  }
	  });
	
}
function selectIntissn(id, index, name) 
{
	
	$("#search-box_"+index).val(name);
	$("#issn_id_international_"+index).val(id);
	$("#suggesstion-box_"+index).hide();
	load_issn_journal(id, index);
}
function auto_complete_text(index, val)
{
   var publication_year = $( "select#publication_year_"+index+" option:selected").val();
   var keyword = $(val).val();
   var post_url = window.location.protocol + "//" + window.location.host + "/";
   //alert(keyword);
   //alert(index);
   $.ajax({
	  type: "POST",
	  url: post_url+"read_issn.php",
	  data:'keyword='+keyword+'&index='+index+'&year='+publication_year,
	  beforeSend: function(){
		  $("#search-box_"+index).css("background","#FFF url(LoaderIcon.gif) no-repeat 165px");
	  },
	  success: function(data){
		  $("#suggesstion-box_"+index).show();
		  $("#suggesstion-box_"+index).html(data);
		  $("#search-box_"+index).css("background","#FFF");
	  }
	  });
	
} 
function load_issn_journal(val, index) 
{
	 var issn_id = parseInt(val);
	 
	 var post_url = window.location.protocol + "//" + window.location.host + "/";
	 if (issn_id)
	 {
		 // show the div
		$("#ajax_loading_pub").show();
		var tbl = 'issn_international';
		
		$.ajax({
			  type: "POST",
			  url: post_url+"load_issn.php",
			  data: "tbl="+ tbl +"& issn_id="+ issn_id,
			  success: function(html){
				 
				  $("#published_international_"+index).val(html);
			  }
		  });
		  
		  $.ajax({
			  type: "POST",
			  url: post_url+"load_impact_factor.php",
			  data: "tbl="+ tbl +"& issn_id="+ issn_id,
			  success: function(html){
				  $("#ajax_loading_pub").hide();
				  $("#international_impact_"+index).val(html);
				  
				  var counter = parseInt($("#counter").val());
				 // alert(counter);
				  if (counter)
				  {
					  var i;
					  var current_impact_factor;
					  var total_current_factor = 0.00;
					  for (i = 1; i <= counter; i++) 
					  {   
						 current_impact_factor = $("#international_impact_"+i).val(); 
						 //alert(current_impact_factor);
						 if (current_impact_factor)
						 {
							current_impact_factor = parseFloat(current_impact_factor); 
							total_current_factor = total_current_factor + current_impact_factor;
						 }
					  }
					  //total_current_factor.toFixed(3);
					  var final_impact_val = total_current_factor.toFixed(3);
					  $("#total_impact_factor_international").val(final_impact_val);
				  }	
			  }
		  });
		  
		  
		 
	 }
	 else
	 {
		$("#ajax_loading_pub").hide();
	 }
}
function load_issn_local_jrnal(val, index)
{
	 var issn_id = parseInt(val);
	 var post_url = window.location.protocol + "//" + window.location.host + "/";
	 if (issn_id)
	 {
		 // show the div
		$("#ajax_loading_local").show();
		var tbl = 'issn_local';
		
		$.ajax({
			  type: "POST",
			  url: post_url+"load_issn.php",
			  data: "tbl="+ tbl +"& issn_id="+ issn_id,
			  success: function(html){
				  $("#ajax_loading_local").hide();
				  $("#published_local_"+index).val(html);
			  }
		  });
		 
	 }
	 else
	 {
		$("#ajax_loading_local").hide();
	 }
}
function parseDate(str) {
    //alert(str);
	var mdy = str.split('/');
    return new Date(mdy[2], mdy[0]-1, mdy[1]);
}

function daydiff(first, second) {
    return Math.round((second-first)/(1000*60*60*24));
}
$(document).ready(function (e) {
	
	
	$('#no_of_authors').on('change',function(){
       var no_of_authors = parseInt($(this).val());
       //alert(no_of_authors);
	   if (no_of_authors > 1)
	   {
			$('#principal_author_area').css('display', 'block');
			   
	   }
	   else
	   {
		  $('#principal_author_area').css('display', 'none'); 
	   }
    });
	
	var consent_file = $('#upload_file input[type="file"]');
	var consent_area = $('#consent_area input[type="radio"]');
	var checkbox_required = $('#options input[type="checkbox"]');
	$('#paper_submit_btn .save').on("click",function() {
	  //alert('i am here');
	  
	  if (checkbox_required.is(':checked')) {
			checkbox_required.prop('required', false);
		} else {
			checkbox_required.prop('required', true);
		}
	});
	
	$('#paper_submit_btn .exit').on("click",function() {
	  //alert('i am here');
	  if (checkbox_required.is(':checked')) {
			checkbox_required.prop('required', false);
		} else {
			checkbox_required.prop('required', true);
		}
	});
	
	checkbox_required.on('click', function(){
		var chkArray = [];
		var radio_option_val = parseInt(this.value);
		//alert(radio_option_val);
		$(".chk:checked").each(function() {
			var checked_value = $(this).val();
			//alert(checked_value);
			chkArray.push(checked_value);
		});
		if(jQuery.inArray("4", chkArray) != -1)
		{
			 $('#publish_other_detail').css('display', 'inline-block');
		}
		else
		{
			$('#publish_other_detail').css('display', 'none');
		}
		/*if (radio_option_val == 4) {
            
        }
        else {
            
        }*/
		
	});
	
	consent_area.on('click', function(){
		var radio_option_val = this.value;
		var existing_consent_file = $('#existing_consent_file').val();
		//alert(radio_option_val);
		if (radio_option_val == 'yes') {
             $('#upload_file').css('display', 'block');
			 if (existing_consent_file)
			 {
				consent_file.prop('required', false);
			 }
			 else
			 {
			 	consent_file.prop('required', true);
			 }
        }
        else {
            $('#upload_file').css('display', 'none');
			consent_file.prop('required', false);
        }
		
	});
	
		
	$('#full_paper').bind('change', function() {

  
	  //this.files[0].size gets the size of your file.
	  //alert(this.files[0].size);
	  var filesize = this.files[0].size;
	  
	  if (filesize < 2080532)
	  {
		  $('#file_error_3').css('display', 'none');
		  $('#paper_submit_btn').css('display', 'block');
	  }
	  else
	  {
		  alert('Upload file size should not exceed 2 MB');
		  $('#file_error_3').css('display', 'inline-block');
		  $('#paper_submit_btn').css('display', 'none');
	  }
	});
	$('#invitation').bind('change', function() {

	  //this.files[0].size gets the size of your file.
	  //alert(this.files[0].size);
	  var filesize = this.files[0].size;
	  
	  if (filesize < 2080532)
	  {
		  $('#file_error_1').css('display', 'none');
		  $('#paper_submit_btn').css('display', 'block');
	  }
	  else
	  {
		  alert('Upload file size should not exceed 2 MB');
		  $('#file_error_1').css('display', 'inline-block');
		  $('#paper_submit_btn').css('display', 'none');
	  }
	
	
	
	});
	
	$('#file').bind('change', function() {

	  //this.files[0].size gets the size of your file.
	  //alert(this.files[0].size);
	  var filesize = this.files[0].size;
	  
	  if (filesize < 2080532)
	  {
		  $('#file_error_2').css('display', 'none');
		  $('#paper_submit_btn').css('display', 'block');
	  }
	  else
	  {
		  alert('Upload file size should not exceed 2 MB');
		  $('#file_error_2').css('display', 'inline-block');
		  $('#paper_submit_btn').css('display', 'none');
	  }
	
	});
	
	$('#consent_file').bind('change', function() {

	  //this.files[0].size gets the size of your file.
	  //alert(this.files[0].size);
	  var filesize = this.files[0].size;
	  
	  if (filesize < 2080532)
	  {
		  $('#file_error_4').css('display', 'none');
		  $('#paper_submit_btn').css('display', 'block');
	  }
	  else
	  {
		  alert('Upload file size should not exceed 2 MB');
		  $('#file_error_4').css('display', 'inline-block');
		  $('#paper_submit_btn').css('display', 'none');
	  }
	
	});
	
	$('#visa').bind('change', function() {

	  //this.files[0].size gets the size of your file.
	  //alert(this.files[0].size);
	  var filesize = this.files[0].size;
	  
	  if (filesize < 2080532)
	  {
		  $('#file_error_5').css('display', 'none');
		  $('#event_submit_btn').css('display', 'block');
		  $('#visa_error_event').hide();	
	  }
	  else
	  {
		  alert('Upload file size should not exceed 2 MB');
		  $('#file_error_5').css('display', 'inline-block');
		  $('#event_submit_btn').css('display', 'none');
		  $('#visa_error_event').show();	
	  }
	
	});
	
	
	$("select#mode_presentation").change(function(){
		 var mode_presentation = $( "select#mode_presentation option:selected").val();
		 if (mode_presentation == 'oral')
		 {
			 // show the div
			 $("#Dtl_Frm").show();
			 $("#presentation_area").show(); 
			 $("#sponsor").hide();
		 }
		 else
		 {
			 $("#sponsor").show();
			 $("#Dtl_Frm").hide();
			 $("#presentation_area").hide();
		 }
		
	});
	
	$("#start_date").change(function(){
		
		var visa_required = $('#upload_visa input[type="file"]');
		
		var start_date = $('#start_date').val();
		
		var existing_visa = $('#existing_visa').val();
			
		var fullDate = new Date()

		//convert month to 2 digits
		var twoDigitMonth = ((fullDate.getMonth().length+1) === 1)? (fullDate.getMonth()+1) :(fullDate.getMonth()+1);
		var currentDate = twoDigitMonth + "/" + fullDate.getDate() + "/" + fullDate.getFullYear();

		
		//alert(start_date);
		//alert(currentDate);
		
		var diffDays = daydiff(parseDate(currentDate), parseDate(start_date));
		
		//alert(diffDays);
		
		if (diffDays >= 49)
		{
			$('#upload_visa').hide();	
			visa_required.prop('required', false);	
			$('#visa_error_event').hide();	
			$('#days_error_event').hide();
		}
		else if (diffDays >= 30)
		{
			if (existing_visa)
			{
				$('#upload_visa').show();	
				visa_required.prop('required', false);			
				$('#visa_error_event').hide();
				$('#days_error_event').hide();
			}
			else
			{
				$('#upload_visa').show();
				visa_required.prop('required', true);
				$('#visa_error_event').show();
				$('#days_error_event').hide();
			}
		}
		else
		{
			$('#upload_visa').hide();	
			visa_required.prop('required', false);
			$('#visa_error_event').hide();
			$('#days_error_event').hide();
		}
		
	});
	
	
	$("#itg_form_1").on('submit',(function(e) {
		e.preventDefault();
		tab = 1;
		var next_tab = parseInt(tab) + 1;
		var eligibility = $('input[name=eligibility]:checked', '#itg_form_1').val();
		
		var post_url = window.location.protocol + "//" + window.location.host + "/";
		if (eligibility)
		{
			eligibility = parseInt(eligibility);
			$('.save_error').hide();
			//alert(eligibility);
			$('#ajax_loading_1').show();
			
			$.ajax({
				url: post_url+"save_itg.php",   	// Url to which the request is send
				type: "POST",      				// Type of request to be send, called as method
				data:  new FormData(this), 		// Data sent to server, a set of key/value pairs representing form fields and values 
				contentType: false,       		// The content type used when sending data to the server. Default is: "application/x-www-form-urlencoded"
				cache: false,					// To unable request pages to be cached
				processData:false,  			// To send DOMDocument or non processed data file it is set to false (i.e. data should not be in the form of string)
				success: function(data)  		// A function to be called if request succeeds
				{
					$('#ajax_loading_1').hide();
					
					var new_data = parseInt(data);
					if (new_data == 0)
					{
						$('.save_error').show();
					}
					else
					{
						//alert(new_data);
						$('.save_error').hide();
						if (eligibility == 6)
						{
							$( "#tab_4" ).removeClass( "hide_me" );
							$( "#tab-4" ).removeClass( "hide_me" );
							
							$( "#tab_5" ).addClass( "hide_me" );
							$( "#tab-5" ).addClass( "hide_me" );
						}
						else
						{
							$( "#tab_4" ).addClass( "hide_me" );
							$( "#tab-4" ).addClass( "hide_me" );
							
							$( "#tab_5" ).removeClass( "hide_me" );
							$( "#tab-5" ).removeClass( "hide_me" );
						}
						$('html,body').scrollTop(0);
						$( "#tab_"+next_tab ).removeClass( "disabledTab" );
						show_tab(next_tab);
						
						if (!isNaN(new_data))
						{
							$('.record_id').val(new_data);
						}
					}
					
					//
				}	        
		   });
		}
		else
		{
			$("#eligibility").focus();
			$("#eligibility").addClass( "border_2" );
			return false;
		}
	}));
	$("#itg_form_paper").on('submit',(function(e) {
		
		e.preventDefault();
		tab = 3;
		var next_tab = parseInt(tab) + 1;
		
		var action = $(e.target).find("input[type=submit]:focus");
		
		if (action[0])
		{
			var submit_clicked = action[0].className;
		}
		else
		{
			var submit_clicked = 'save';
		}
		
		var no_of_authors = parseInt($( "select#no_of_authors option:selected").val());
		var principal_author = parseInt($( "select#principal_author option:selected").val()); 
		
		
		if (no_of_authors > 1)
		{
			if (principal_author)
			{
				$("#principal_author").removeClass( "border_2" );			
			}
			else
			{
				$("#principal_author").focus();
				$("#principal_author").addClass( "border_2" );
				return false;	
			}
		}
		else
		{
			$("#principal_author").removeClass( "border_2" );	
		}
		
		var is_show_phd = parseInt($("input[name=eligibility]:checked").val());
		
		var record_id = $('.record_id').val();
		var paper_title = $('#paper_title').val();
		
		var is_review = $('input[name=is_review]:checked', '#itg_form_paper').val();
		
		if (is_review == 'yes')
		{
			var peer_file = $('#file').val();	
			var file_review = $('#file_review').val();	
			
			if (file_review)
			{
				// do nothing
			}
			else
			{
				if (peer_file)
				{
					$("#file").removeClass( "border_2" );
				}
				else
				{
					$("#file").focus();
					$("#file").addClass( "border_2" );
					return false;
				}
			}
		}
		else
		{
			$("#file").removeClass( "border_2" );
		}
		//alert('i am here');
		var post_url = window.location.protocol + "//" + window.location.host + "/";
		
		

		
		if (record_id && paper_title)
		{
			$('#save_error_paper').hide();
			$('#ajax_loading_paper').show();
			
			//return false;
			
			$.ajax({
				url: post_url+"save_itg_paper.php",   	// Url to which the request is send
				type: "POST",      				// Type of request to be send, called as method
				data:  new FormData(this), 		// Data sent to server, a set of key/value pairs representing form fields and values 
				contentType: false,       		// The content type used when sending data to the server. Default is: "application/x-www-form-urlencoded"
				cache: false,					// To unable request pages to be cached
				processData:false,  			// To send DOMDocument or non processed data file it is set to false (i.e. data should not be in the form of string)
				success: function(data)  		// A function to be called if request succeeds
				{
					$('#ajax_loading_paper').hide();
					
					
					var new_data = parseInt(data);
					if (new_data == 0)
					{
						$('#save_error_paper').show();
					}
					
					else
					{
						
						$('#save_error_paper').hide();
						if (submit_clicked == 'save')
						{
							$('html,body').scrollTop(0);
							
							if (is_show_phd == 6)
							{
								$( "#tab_"+next_tab ).removeClass( "disabledTab" );
								show_tab(next_tab);
							}
							else
							{
								var new_next_tab = next_tab + 1;
								$( "#tab_"+new_next_tab ).removeClass( "disabledTab" );
								show_tab(new_next_tab);
							}
							
						}
						else
						{
							//alert('else');
							var newURL = window.location.protocol + "//" + window.location.host + "/itg_apps.php";
							//alert(newURL);
							window.location = newURL;
						}
						
						
					}
					
				}	        
		   });
			
			
			
		}
		else
		{
			$("#paper_title").focus();
			$("#paper_title").addClass( "border_2" );
			return false;
		}
	}));
	$("#itg_form_event").on('submit',(function(e) {
		
		//alert('i am here');
		e.preventDefault();
		tab = 2;
		
		var visa_required = $('#upload_visa input[type="file"]');
		
		var next_tab = parseInt(tab) + 1;
		
		var action = $(e.target).find("input[type=submit]:focus");
		
		if (action[0])
		{
			var submit_clicked = action[0].className;
		}
		else
		{
			var submit_clicked = 'save';
		}
		
		var info_organizers = $('#info_organizers').val();
		
		
		var record_id = $('.record_id').val();
		var event_name = $('#event_name').val();
		//var is_show_phd = parseInt($("input[name=eligibility]:checked").val());
		//alert(is_show_phd);
		var post_url = window.location.protocol + "//" + window.location.host + "/";
		
		if (record_id && event_name)
		{
			$('#save_error_event').hide();
			$('#already_availed_event').hide();
			$('#days_error_event').hide();
			$('#visa_error_event').hide();
			$('#upload_visa').hide();	
			visa_required.prop('required', false);
			$('#ajax_loading_event').show();
			
			var start_date = $('#start_date').val();
			
			var fullDate = new Date()
  
			//convert month to 2 digits
			var twoDigitMonth = ((fullDate.getMonth().length+1) === 1)? (fullDate.getMonth()+1) :(fullDate.getMonth()+1);
			var currentDate = twoDigitMonth + "/" + fullDate.getDate() + "/" + fullDate.getFullYear();

			
			//alert(start_date);
			//alert(currentDate);
			
			var diffDays = daydiff(parseDate(currentDate), parseDate(start_date));

			//alert(diffDays);
    
			var days_ok = 0;
			
			//return false;
			if (diffDays >= 49)
			{
				days_ok = 1;
			}
			else if (diffDays >= 30)
			{
				var visa = $('#visa').val();
				var existing_visa = $('#existing_visa').val();
				
				if (visa)
				{
					days_ok = 1;
				}
				else if (existing_visa)
				{
					days_ok = 1;
				}
				else
				{
					$('#ajax_loading_event').hide();
					//alert('visa error');
					$('#upload_visa').show();
					visa_required.prop('required', true);
					$('#visa_error_event').show();
				}
			}
			else
			{
				//alert('i am here');
				$('#ajax_loading_event').hide();
				$('#days_error_event').css('display', 'inline-block');
				
			}
			if (days_ok)
			{
				$.ajax({
					url: post_url+"save_itg_event.php",   	// Url to which the request is send
					type: "POST",      				// Type of request to be send, called as method
					data:  new FormData(this), 		// Data sent to server, a set of key/value pairs representing form fields and values 
					contentType: false,       		// The content type used when sending data to the server. Default is: "application/x-www-form-urlencoded"
					cache: false,					// To unable request pages to be cached
					processData:false,  			// To send DOMDocument or non processed data file it is set to false (i.e. data should not be in the form of string)
					success: function(data)  		// A function to be called if request succeeds
					{
						$('#ajax_loading_event').hide();
						$('#days_error_event').hide();
						$('#visa_error_event').hide();
						$('#upload_visa').hide();	
						visa_required.prop('required', false);
						
						var new_data = parseInt(data);
						if (new_data == 0)
						{
							$('#save_error_event').show();
						}
						else if (new_data == 1)
						{
							$('#already_availed_event').show();
						}
						else
						{
							
							$('#save_error_event').hide();
							if (submit_clicked == 'save')
							{
								$('html,body').scrollTop(0);
								
								$( "#tab_"+next_tab ).removeClass( "disabledTab" );
								show_tab(next_tab);
							}
							else
							{
								//alert('else');
								var newURL = window.location.protocol + "//" + window.location.host + "/itg_apps.php";
								//alert(newURL);
								window.location = newURL;
							}
							
							
						}
						
					}	        
			   });
			}
			
			
			
		}
		else
		{
			$("#event_name").focus();
			$("#event_name").addClass( "border_2" );
			return false;
		}
	}));
	$("#itg_form_phd").on('submit',(function(e) {
		e.preventDefault();
		tab = 4;
		var next_tab = parseInt(tab) + 1;
		
		var action = $(e.target).find("input[type=submit]:focus");
		if (action[0])
		{
			var submit_clicked = action[0].className;
		}
		else
		{
			var submit_clicked = 'save';
		}
		//alert(submit_clicked);
		
		var is_show_phd = parseInt($("input[name=eligibility]:checked").val());
		
		var record_id = $('.record_id').val();
		var post_url = window.location.protocol + "//" + window.location.host + "/";
		
		var list_vars_1 = ["university", "department", "from_year", "to_year"];
		var ret_val = check_field_empty(list_vars_1, tab);
		if (!ret_val)
		{
			return false;
		}
		if (record_id)
		{
			$('#save_error_phd').hide();
			$('#ajax_loading_phd').show();
			
			$.ajax({
				url: post_url+"save_itg_phd.php",   	// Url to which the request is send
				type: "POST",      				// Type of request to be send, called as method
				data:  new FormData(this), 		// Data sent to server, a set of key/value pairs representing form fields and values 
				contentType: false,       		// The content type used when sending data to the server. Default is: "application/x-www-form-urlencoded"
				cache: false,					// To unable request pages to be cached
				processData:false,  			// To send DOMDocument or non processed data file it is set to false (i.e. data should not be in the form of string)
				success: function(data)  		// A function to be called if request succeeds
				{
					$('#ajax_loading_phd').hide();
					
					var new_data = parseInt(data);
					if (new_data == 0)
					{
						$('#save_error_phd').show();
					}
					else
					{
						
						$('#save_error_phd').hide();
						if (submit_clicked == 'save')
						{
							$('html,body').scrollTop(0);
							
							if (is_show_phd == 6)
							{
								var new_next_tab = next_tab + 1;
								$( "#tab_"+new_next_tab ).removeClass( "disabledTab" );
								show_tab(new_next_tab);
							}
							else
							{
								$( "#tab_"+next_tab ).removeClass( "disabledTab" );
								show_tab(next_tab);
							}
								
							/*$( "#tab_"+next_tab ).removeClass( "disabledTab" );
							//alert(submit_clicked);
							show_tab(next_tab);*/
							
						}
						else
						{
							//alert('else');
							var newURL = window.location.protocol + "//" + window.location.host + "/itg_apps.php";
							//alert(newURL);
							window.location = newURL;
						}
						
						
					}
					
				}	        
		   });
		}
	}));
	$("#itg_form_employ").on('submit',(function(e) {
		e.preventDefault();
		tab = 5;
		var next_tab = parseInt(tab) + 1;
		
		var action = $(e.target).find("input[type=submit]:focus");
		if (action[0])
		{
			var submit_clicked = action[0].className;
		}
		else
		{
			var submit_clicked = 'save';
		}
		//alert(submit_clicked);
		
		var record_id = $('.record_id').val();
		var post_url = window.location.protocol + "//" + window.location.host + "/";
		var current_employer = $('#current_employer').val();
		
		if (record_id && current_employer)
		{
			$('#save_error_employ').hide();
			$('#ajax_loading_employ').show();
			
			$.ajax({
				url: post_url+"save_itg_employ.php",   	// Url to which the request is send
				type: "POST",      				// Type of request to be send, called as method
				data:  new FormData(this), 		// Data sent to server, a set of key/value pairs representing form fields and values 
				contentType: false,       		// The content type used when sending data to the server. Default is: "application/x-www-form-urlencoded"
				cache: false,					// To unable request pages to be cached
				processData:false,  			// To send DOMDocument or non processed data file it is set to false (i.e. data should not be in the form of string)
				success: function(data)  		// A function to be called if request succeeds
				{
					$('#ajax_loading_employ').hide();
					
					var new_data = parseInt(data);
					if (new_data == 0)
					{
						$('#save_error_employ').show();
					}
					else
					{
						
						$('#save_error_employ').hide();
						if (submit_clicked == 'save')
						{
							//alert(submit_clicked);
							$('html,body').scrollTop(0);
							$( "#tab_"+next_tab ).removeClass( "disabledTab" );
							show_tab(next_tab);
							
						}
						else
						{
							//alert('else');
							var newURL = window.location.protocol + "//" + window.location.host + "/itg_apps.php";
							//alert(newURL);
							window.location = newURL;
						}
						
						
					}
					
				}	        
		   });
		}
		else
		{
			$("#current_employer").focus();
			$("#current_employer").addClass( "border_2" );
			return false;
		}
	}));
	$("#itg_form_publish").on('submit',(function(e) {
		e.preventDefault();
		tab = 5;
		var next_tab = parseInt(tab) + 1;
		
		var action = $(e.target).find("input[type=submit]:focus");
		if (action[0])
		{
			var submit_clicked = action[0].className;
		}
		else
		{
			var submit_clicked = 'save';
		}
		//alert(submit_clicked);
		
		var record_id = $('.record_id').val();
		var post_url = window.location.protocol + "//" + window.location.host + "/";
		//var issn_id_international = $( "select#issn_id_international_1 option:selected").val();
		
		var process = 1;
		var overall_publications = $('#overall_publications').val();
		
		if (overall_publications)
		{
			if(Math.floor(overall_publications) == overall_publications && $.isNumeric(overall_publications)) 
			{
				// integer val	
			}
			else
			{
				process = 0;
				alert('Overall no. of publications should be integer value');
				$("#overall_publications").focus();
				return false;
			}
		}
		
		var counter_local =  parseInt($("#counter_local").val());
		
		//alert(counter_local);
		if (counter_local)
		{
			for (i = 1; i <= counter_local; i++) 
			{ 
				var local_title_text = $('#local_title_'+i).val();	
				//alert(local_title_text);
				if (local_title_text)		
				{
					var published_local_text = $('#published_local_'+i).val();	
					var category_selected = $( "select#category_"+i+" option:selected").val();
					var publish_date_val = $('#publish_date_local_'+i).val();	
					
					if (!published_local_text)
					{
						$('#published_local_'+i).focus();
						$('#published_local_'+i).addClass( "border_2" );
						return false;
					}
					else
					{
						$('#published_local_'+i).removeClass( "border_2" );	
					}
					
					if (!category_selected)
					{
						$('#category_'+i).focus();
						$('#category_'+i).addClass( "border_2" );
						return false;
					}
					else
					{
						$('#category_'+i).removeClass( "border_2" );	
					}
					
					if (!publish_date_val || publish_date_val == '0000-00-00')
					{
						$('#publish_date_local_'+i).focus();
						$('#publish_date_local_'+i).addClass( "border_2" );
						return false;
					}
					else
					{
						$('#publish_date_local_'+i).removeClass( "border_2" );	
					}
						
				}
			}
		}
		
		if (record_id && process)
		{
			$('#save_error_publish').hide();
			$('#ajax_loading_publish').show();
			
			$.ajax({
				url: post_url+"save_itg_publish.php",   	// Url to which the request is send
				type: "POST",      				// Type of request to be send, called as method
				data:  new FormData(this), 		// Data sent to server, a set of key/value pairs representing form fields and values 
				contentType: false,       		// The content type used when sending data to the server. Default is: "application/x-www-form-urlencoded"
				cache: false,					// To unable request pages to be cached
				processData:false,  			// To send DOMDocument or non processed data file it is set to false (i.e. data should not be in the form of string)
				success: function(data)  		// A function to be called if request succeeds
				{
					$('#ajax_loading_publish').hide();
					
					var new_data = parseInt(data);
					if (new_data == 0)
					{
						$('#save_error_publish').show();
					}
					else
					{
						
						$('#save_error_publish').hide();
						if (submit_clicked == 'save')
						{
							//alert(submit_clicked);
							$('html,body').scrollTop(0);
							$( "#tab_"+next_tab ).removeClass( "disabledTab" );
							show_tab(next_tab);
							
						}
						else
						{
							//alert('else');
							var newURL = window.location.protocol + "//" + window.location.host + "/itg_apps.php";
							//alert(newURL);
							window.location = newURL;
						}
						
						
					}
					
				}	        
		   });
		}
		/*else
		{
			$("#issn_id_international_1").focus();
			$("#issn_id_international_1").addClass( "border_2" );
			return false;
		}*/
		
	}));
	$("#form_transport").on('submit',(function(e) {
		e.preventDefault();
		tab = 9;
		var next_tab = parseInt(tab) + 1;
		
		var action = $(e.target).find("input[type=submit]:focus");
		if (action[0])
		{
			var submit_clicked = action[0].className;
		}
		else
		{
			var submit_clicked = 'save';
		}
		//alert(submit_clicked);
		
		var record_id = $('.record_id').val();
		var post_url = window.location.protocol + "//" + window.location.host + "/";
		
		if (record_id)
		{
			$('#save_error_transport').hide();
			$('#ajax_loading_transport').show();
			
			$.ajax({
				url: post_url+"save_itg_transport.php",   	// Url to which the request is send
				type: "POST",      				// Type of request to be send, called as method
				data:  new FormData(this), 		// Data sent to server, a set of key/value pairs representing form fields and values 
				contentType: false,       		// The content type used when sending data to the server. Default is: "application/x-www-form-urlencoded"
				cache: false,					// To unable request pages to be cached
				processData:false,  			// To send DOMDocument or non processed data file it is set to false (i.e. data should not be in the form of string)
				success: function(data)  		// A function to be called if request succeeds
				{
					$('#ajax_loading_transport').hide();
					
					var new_data = parseInt(data);
					if (new_data == 0)
					{
						$('#save_error_transport').show();
					}
					else
					{
						
						$('#save_error_transport').hide();
						if (submit_clicked == 'save')
						{
							//alert(submit_clicked);
							$('html,body').scrollTop(0);
							$( "#tab_"+next_tab ).removeClass( "disabledTab" );
							show_tab(next_tab);
							
						}
						else
						{
							//alert('else');
							var newURL = window.location.protocol + "//" + window.location.host + "/itg_apps.php";
							//alert(newURL);
							window.location = newURL;
						}
						
						
					}
					
				}	        
		   });
		}
	}));
	$("#itg_form_cost").on('submit',(function(e) {
		e.preventDefault();
		tab = 8;
		var next_tab = parseInt(tab) + 1;
		
		var action = $(e.target).find("input[type=submit]:focus");
		if (action[0])
		{
			var submit_clicked = action[0].className;
		}
		else
		{
			var submit_clicked = 'save';
		}
		//alert(submit_clicked);
		
		var record_id = $('.record_id').val();
		var post_url = window.location.protocol + "//" + window.location.host + "/";
		var register_cost_pkr = $('#user_register_cost_pkr').val();
		var register_cost_usd = $('#user_register_cost_usd').val();
		if (!register_cost_pkr && !register_cost_usd)
		{
			$("#user_register_cost_pkr").focus();
			$("#user_register_cost_pkr").addClass( "border_2" );
			return false;
		}
		else
		{
			$("#user_register_cost_pkr").removeClass( "border_2" );
		}
		
		if (record_id)
		{
			$('#save_error_cost').hide();
			$('#ajax_loading_cost').show();
			
			$.ajax({
				url: post_url+"save_itg_cost.php",   	// Url to which the request is send
				type: "POST",      				// Type of request to be send, called as method
				data:  new FormData(this), 		// Data sent to server, a set of key/value pairs representing form fields and values 
				contentType: false,       		// The content type used when sending data to the server. Default is: "application/x-www-form-urlencoded"
				cache: false,					// To unable request pages to be cached
				processData:false,  			// To send DOMDocument or non processed data file it is set to false (i.e. data should not be in the form of string)
				success: function(data)  		// A function to be called if request succeeds
				{
					$('#ajax_loading_cost').hide();
					
					var new_data = parseInt(data);
					if (new_data == 0)
					{
						$('#save_error_cost').show();
					}
					else
					{
						//alert(data);
						$('#save_error_cost').hide();
						if (submit_clicked == 'save')
						{
							var path = "pdf/mpdf60/examples/document_file.php?id="+record_id+"&key="+data+"";
							var url = window.location.protocol + "//" + window.location.host + "/"+path;
							$("a#review_anch").attr("href", url)
							//alert(submit_clicked);
							$('html,body').scrollTop(0);
							$( "#tab_"+next_tab ).removeClass( "disabledTab" );
							show_tab(next_tab);
							
						}
						else
						{
							//alert('else');
							var newURL = window.location.protocol + "//" + window.location.host + "/itg_apps.php";
							//alert(newURL);
							window.location = newURL;
						}
						
						
					}
					
				}	        
		   });
		}
		
	}));
	$("#itg_form_review").on('submit',(function(e) {
		
		e.preventDefault();
		var record_id = $('.record_id').val();
		var post_url = window.location.protocol + "//" + window.location.host + "/";
		
		if (record_id)
		{
			$('#save_error_review').hide();
			$('#already_availed_1').hide();
			$('#days_error_1').hide();
			$('#visa_error_1').hide();
			$('#ajax_loading_review').show();
			
			$.ajax({
				url: post_url+"save_itg_review.php",   	// Url to which the request is send
				type: "POST",      				// Type of request to be send, called as method
				data:  new FormData(this), 		// Data sent to server, a set of key/value pairs representing form fields and values 
				contentType: false,       		// The content type used when sending data to the server. Default is: "application/x-www-form-urlencoded"
				cache: false,					// To unable request pages to be cached
				processData:false,  			// To send DOMDocument or non processed data file it is set to false (i.e. data should not be in the form of string)
				success: function(data)  		// A function to be called if request succeeds
				{
					$('#ajax_loading_review').hide();
					
					var new_data = parseInt(data);
					//alert(new_data);
					if (new_data == 0)
					{
						$('#save_error_review').show();
					}
					else if (new_data == 2)
					{
						$('#already_availed_1').show();
					}
					else if (new_data == 1)
					{
						$('#days_error_1').show();
					}
					else if (new_data == 3)
					{
						$('#visa_error_1').show();
					}
					else
					{
						//alert(data);
						$('#save_error_review').hide();
						var newURL = window.location.protocol + "//" + window.location.host + "/itg_apps.php?id="+record_id;
							//alert(newURL);
						window.location = newURL;
					}
					
				}	        
		   });
		}
	}));
	
	$("#itg_form_others").on('submit',(function(e) {
		
		e.preventDefault();
		
		tab = 9;
		var next_tab = parseInt(tab) + 1;
		
		var record_id = $('.record_id').val();
		var post_url = window.location.protocol + "//" + window.location.host + "/";
		
		var action = $(e.target).find("input[type=submit]:focus");
		if (action[0])
		{
			var submit_clicked = action[0].className;
		}
		else
		{
			var submit_clicked = 'save';
		}
		
		if (record_id)
		{
			$('#save_error_others').hide();
			$('#ajax_loading_others').show();
			
			$.ajax({
				url: post_url+"save_itg_others.php",   	// Url to which the request is send
				type: "POST",      				// Type of request to be send, called as method
				data:  new FormData(this), 		// Data sent to server, a set of key/value pairs representing form fields and values 
				contentType: false,       		// The content type used when sending data to the server. Default is: "application/x-www-form-urlencoded"
				cache: false,					// To unable request pages to be cached
				processData:false,  			// To send DOMDocument or non processed data file it is set to false (i.e. data should not be in the form of string)
				success: function(data)  		// A function to be called if request succeeds
				{
					$('#ajax_loading_others').hide();
					
					var new_data = parseInt(data);
					//alert(new_data);
					if (new_data == 0)
					{
						$('#save_error_others').show();
					}
					else
					{
						
						$('#save_error_others').hide();
						if (submit_clicked == 'save')
						{
							$('html,body').scrollTop(0);
							show_tab(next_tab);
						}
						else
						{
							var newURL = window.location.protocol + "//" + window.location.host + "/phecadmins/admin.php?mod=manageItg";
							//alert(newURL);
							window.location = newURL;
						}
					}
					
				}	        
		   });
		}
	}));
	
	$("#itg_form_status").on('submit',(function(e) {
		
		e.preventDefault();
		
		var record_id = $('.record_id').val();
		var post_url = window.location.protocol + "//" + window.location.host + "/";
		
		
		if (record_id)
		{
			$('#save_error_status').hide();
			$('#closebtn').hide();
			$('#ajax_loading_status').show();
			
			$.ajax({
				url: post_url+"save_student_status.php",   	// Url to which the request is send
				type: "POST",      				// Type of request to be send, called as method
				data:  new FormData(this), 		// Data sent to server, a set of key/value pairs representing form fields and values 
				contentType: false,       		// The content type used when sending data to the server. Default is: "application/x-www-form-urlencoded"
				cache: false,					// To unable request pages to be cached
				processData:false,  			// To send DOMDocument or non processed data file it is set to false (i.e. data should not be in the form of string)
				success: function(data)  		// A function to be called if request succeeds
				{
					$('#ajax_loading_status').hide();
					
					var new_data = parseInt(data);
					//alert(new_data);
					if (new_data == 0)
					{
						$('#save_error_status').show();
					}
					else
					{
						
						$('#save_error_status').hide();
						$('#btn_exit').hide();
						$('#closebtn').show();
						//alert('i am here');
						//var newURL = window.location.protocol + "//" + window.location.host + "/phecadmins/admin.php?mod=manageItg";
						//alert(newURL);
						//window.location = newURL;
						
					}
					
				}	        
		   });
		}
	}));

// Function to preview image
});